webpackJsonp([28],{"3mCp":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Gu7T"),n=a.n(i),s=a("Xxa5"),r=a.n(s),l=a("exGp"),o=a.n(l),c=a("teIl"),f=a("Y1D9"),u=a("ppua"),d={components:{Header:c.a,RefreshAndLoad:f.a,Blank:u.a},data:function(){return{active:0,list:[],newsList:[{name:"年费律师",id:1},{name:"关注律师",id:2}],lawInfo:"",lawList:[],page:1,limit:5,loading:!1,isLoading:!1,finished:!1}},created:function(){this.active=Number(this.$route.params.type)||this.active,console.log(this.active),this.active?this.refresh():this.getMyLawer()},methods:{switchTab:function(t){t?this.refresh():this.getMyLawer()},getMyLawer:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$Axios.post("/mine/lawyer");case 2:(a=e.sent)&&a.obj&&(t.lawInfo=a.obj);case 4:case"end":return e.stop()}},e,t)}))()},refresh:function(){var t=this;return o()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.page=1,a={page:t.page,limit:t.limit},e.next=4,t.$Axios.post("/mine/follow/lawyer",a);case 4:i=e.sent,t.isLoading=!1,t.finished=!1,i&&i.data?(t.lawList=i.data,t.page++):t.lawList=[];case 8:case"end":return e.stop()}},e,t)}))()},loadMore:function(){var t=this;return o()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.page<=1)){e.next=3;break}return t.loading=!1,e.abrupt("return",!1);case 3:return a={page:t.page,limit:t.limit},e.next=6,t.$Axios.post("/mine/follow/lawyer",a);case 6:i=e.sent,t.loading=!1,i&&i.data?((s=t.lawList).push.apply(s,n()(i.data)),t.page++):t.finished=!0;case 9:case"end":return e.stop()}},e,t)}))()},toDetail:function(t,e){this.$router.push({name:t,params:{lawId:e.id}})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"pb10 content",attrs:{id:"index"}},[a("Header",{attrs:{leftType:2,centerType:2,title:"我的律师",rightType:3}}),t._v(" "),a("div",{staticClass:"border-t-grey-light"},[a("van-tabs",{attrs:{animated:"",swipeable:"","lazy-render":"","line-width":"24","line-height":"4",color:"#6190E8","title-inactive-color":"#616161","title-active-color":"#6190E8"},on:{change:t.switchTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.newsList,function(e,i){return a("van-tab",{key:i,attrs:{title:e.name}},[t.active?a("RefreshAndLoad",[a("van-pull-refresh",{on:{refresh:function(e){return t.refresh()}},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"","immediate-check":!1},on:{load:function(e){return t.loadMore()}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t.lawList&&t.lawList.length>0?a("div",t._l(t.lawList,function(e,i){return a("div",{key:i,staticClass:"zixun-box mlr10 bg-white mtb20 flex p20",on:{click:function(e){return t.toDetail("lawyerDetail")}}},[a("div",{staticClass:"info-left mr10"},[a("img",{attrs:{src:t._f("picUrl")(e.avatar),alt:""}})]),t._v(" "),a("div",{staticClass:"info-right flex-0"},[a("div",{staticClass:"fts16 text-grey mtb10"},[t._v(t._s(e.lawyerName))]),t._v(" "),a("p",{staticClass:"overflow-1 fts14 text-light mtb10"},[t._v("关注时间："+t._s(e.time))])])])}),0):a("Blank")],1)],1)],1):a("div",[t.lawInfo?a("div",{staticClass:"zixun-box mlr10 bg-white mtb20 flex p20",on:{click:function(e){return t.toDetail("lawyerDetail",t.lawInfo)}}},[a("div",{staticClass:"info-left mr10"},[a("img",{attrs:{src:t._f("picUrl")(t.lawInfo.avatar),alt:""}})]),t._v(" "),a("div",{staticClass:"info-right flex-0"},[a("div",{staticClass:"fts16 text-grey mtb10"},[t._v(t._s(t.lawInfo.userName))]),t._v(" "),a("p",{staticClass:"overflow-1 fts14 text-light mtb10"},[t._v(t._s(t.lawInfo.lawFirmName))])])]):a("Blank",{attrs:{text:"没有包年律师"}})],1)],1)}),1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,v,!1,function(t){a("T0Tk")},"data-v-43ae5f11",null);e.default=p.exports},T0Tk:function(t,e){}});